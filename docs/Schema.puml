@startuml name
title AI Commercial Offer Generator - Architecture

' actors
actor Client as C
actor Manager as M

' API Gateway
rectangle "API Gateway" as API

' Orchestrator / LLM-Agent
rectangle "LLM-Agent\n(Orchestrator)" as AG

' Workers
rectangle "Parser Worker\n(PDF / text / OCR / NLP extraction)" as PW
rectangle "Offer Worker\n(Generate proposal via LLM/VLLM)" as OW
rectangle "Validation Worker\n(Apply business rules)" as VW

' Storage
database "PostgreSQL\n(Metadata, tasks, versions)" as DB
folder "File Storage\n(S3 / MinIO)" as FS

' Flux / interactions
C -> API : POST /submit (PDF / email / text)

API -> AG : InputJSON (validate, auth)
AG -> AG : classify content\n(determine parser / offer / validation)

' orchestration -> workers (pub/sub conceptual)
AG --> PW : create parser task
PW --> VW : create validation worker
VW --> OW : create offer worker

' workers processing
OW --> FS : save generated document (PDF/DOCX)
OW --> DB : save proposal metadata

DB --> API : provide result JSON
FS --> API : provide document link
API <--> C : forward JSON result to the client

' Dashboard
M <--> API : view dashboard / download document

